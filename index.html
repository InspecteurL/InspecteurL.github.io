<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bunker Zata</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="BNZ.jpg">

</head>
<body>
    <header>
        <nav>
            <div class="logo">BNZ</div>
            <ul class="nav-links">
                <li><a href="accueil.html">Accueil</a></li>
                <li><a href="journal.html">Journal</a></li>
                <li><a href="lecteurtest.html">Profil</a></li>
                <li><a href="profil.html">D√©couvrir</a></li>
                <li><a href="index.html">Home</a></li>
                <li><a href="amis.html">Amis</a></li>
                <li><a href="mes-amis.html">Mes amis</a></li>
            </ul>
        </nav>
    </header>

    <section class="banner">
        <div class="banner-content">
            <h1>Bienvenue sur Bunker Zata</h1>
            <p>Regardez vos films et s√©ries pr√©f√©r√©s en ligne.</p>
            <a href="accueil.html"><button class="btn-watch">Entrez maintenant</button></a>
        </div>
    </section>

    <section class="movies">
        <h2>Populaire</h2>
        <div class="movies-grid">
            <div class="movie-card">
                <img src="https://m.media-amazon.com/images/M/MV5BMjUxMzE4ZDctODNjMS00MzIwLThjNDktODkwYjc5YWU0MDc0XkEyXkFqcGdeQXVyNjc3OTE4Nzk@._V1_FMjpg_UX1000_.jpg" alt="Movie 1">
                <h3>Steins ; Gate</h3>
            </div>
            <div class="movie-card">
                <img src="https://fr.web.img5.acsta.net/pictures/19/09/20/16/59/1993201.jpg" alt="Movie 2">
                <h3>Erased</h3>
            </div>
            <div class="movie-card">
                <img src="https://m.media-amazon.com/images/M/MV5BYmJhMDYzYzMtNTVlZS00MzgwLWE3ZjAtN2FhZTBlOGQzZmFmXkEyXkFqcGdeQXVyMzgxODM4NjM@._V1_.jpg" alt="Movie 3">
                <h3>Steins ; Gate 0</h3>
            </div>
            <div class="movie-card">
                <img src="https://imgsrv.crunchyroll.com/cdn-cgi/image/fit=contain,format=auto,quality=85,width=480,height=720/catalog/crunchyroll/257cdb6a1fdd566600a01eb0f9f73b22.jpe" alt="Movie 4">
                <h3>Dragon Ball</h3>
            </div>
        </div>
    </section>

    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #141414;
            color: #ffffff;
        }

        header {
            background-color: #141414;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-links {
            list-style: none;
            padding: 0;
            display: flex;
            gap: 20px;
        }

        .nav-links li {
            display: inline;
        }

        .nav-links a {
            color: #ffffff;
            text-decoration: none;
            font-weight: bold;
        }

        .banner {
            background-image: url('banner.jpg');
            background-size: cover;
            background-position: center;
            height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #ffffff;
        }

        .banner-content {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 10px;
        }

        .btn-watch {
            padding: 10px 20px;
            background-color: #e50914;
            border: none;
            color: #ffffff;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
        }

        .movies {
            padding: 20px;
        }

        .movies h2 {
            margin-bottom: 20px;
        }

        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
        }

        .movie-card {
            background-color: #333333;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .movie-card:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .movie-card img {
            width: 100%;
            height: 300px; /* Set a fixed height for all images */
            object-fit: cover; /* Ensure images cover the entire area */
            border-radius: 10px;
        }

        .movie-card h3 {
            margin-top: 10px;
            font-size: 16px;
        }
    </style>

    <script src="scripts.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const btnWatch = document.querySelector('.btn-watch');
            btnWatch.addEventListener('click', () => {
                alert('Commencez √† regarder maintenant!');
            });
        });
    </script>
<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const supabaseUrl = 'https://wuagahavmbugmnuzsouf.supabase.co';
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1YWdhaGF2bWJ1Z21udXpzb3VmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2MDM2NTksImV4cCI6MjA2ODE3OTY1OX0.mjf9cUleV_oq8TsWeKvPVOJSGPc98AyGyfJeA-Tpvho';

  const supabase = createClient(supabaseUrl, supabaseKey);

  const form = document.getElementById('auth-form');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    // üë• Inscription ou Connexion
    let { data, error } = await supabase.auth.signInWithPassword({ email, password });

    // Si l‚Äôutilisateur n'existe pas, on tente l‚Äôinscription
    if (error) {
      console.log('Connexion √©chou√©e, tentative d‚Äôinscription...');
      const result = await supabase.auth.signUp({ email, password });
      if (result.error) {
        alert('Erreur : ' + result.error.message);
        return;
      } else {
        data = result.data;
        alert('Inscription r√©ussie, un email de confirmation a √©t√© envoy√© !');
        return;
      }
    }

    // Si connexion r√©ussie
    const { data: userData } = await supabase.auth.getUser();
    const user = userData.user;
    console.log('Utilisateur connect√© :', user);

    // üîß Cr√©er le profil si non existant
    const { error: profileError } = await supabase.from('profiles').upsert({
      id: user.id,
      username: user.email.split('@')[0], // nom par d√©faut = partie avant @
      is_online: true,
      last_seen: new Date()
    });

    if (profileError) {
      console.error('Erreur cr√©ation profil :', profileError.message);
    } else {
      alert(`Bienvenue ${user.email} ! Vous √™tes maintenant connect√©.`);
    }
  });
</script>

<form id="auth-form">
  <input type="email" id="email" placeholder="Email" required />
  <input type="password" id="password" placeholder="Mot de passe" required />
  <button type="submit">Se connecter / S'inscrire</button>
</form>

</body>
</html>
