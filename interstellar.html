<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interstellar - Lecture</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
  /* Reset & body */
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family: Arial, sans-serif; color:#fff; background:#000; overflow-x:hidden; }

  /* Fond cinématique */
  #background {
    position: fixed; top:0; left:0; width:100%; height:100%;
    background: url('https://image.tmdb.org/t/p/original/rAiYTfKGqDCRIIqo664sY9XZIvQ.jpg') center/cover no-repeat;
    filter: brightness(0.3); z-index:-1;
  }

  /* Container vidéo */
  #video-container { position: relative; max-width: 900px; margin: 50px auto; }

  video { width:100%; border-radius: 10px; display: block; }

  /* Bouton central play */
  #centerPlay {
    position: absolute; top:50%; left:50%; transform: translate(-50%, -50%);
    font-family: 'Material Icons'; font-size:80px; cursor:pointer;
    color:#fff; transition: 0.3s; background: rgba(0,0,0,0.5); padding:20px; border-radius:50%;
  }

  #centerPlay:hover { background: rgba(0,0,0,0.7); }

  /* Controls */
  #controls { position:absolute; bottom:10px; left:0; width:100%; display:flex; align-items:center; justify-content:space-between; padding:10px; background: rgba(0,0,0,0.4); border-radius:0 0 10px 10px; transition:0.3s; }
  #controls.hide { opacity:0; pointer-events:none; }
  #progressWrapper { position:absolute; bottom:50px; left:0; width:100%; height:5px; background: rgba(255,255,255,0.2); cursor:pointer; }
  #progress-bar { width:0%; height:100%; background:#ff0000; }

  /* Fiche du film */
  #fiche {
    max-width:900px; margin: 20px auto; padding:20px; background: rgba(0,0,0,0.6); border-radius:10px;
  }
  #fiche h1 { font-size:2em; margin-bottom:10px; }
  #fiche p { line-height:1.5; }
  #fiche .genres { font-style: italic; margin-top:5px; }

  /* Menus */
  .menu { position:absolute; bottom:60px; right:10px; display:none; flex-direction:column; background: rgba(0,0,0,0.8); border-radius:5px; padding:5px; }
  .menu button { margin:5px; color:#fff; background:none; border:1px solid #fff; border-radius:5px; cursor:pointer; padding:5px 10px; }

  /* Boutons du player */
  .material-icons { cursor:pointer; margin:0 5px; }
  #volume-slider { width:80px; }

</style>
</head>
<body>

<div id="background"></div>

<div id="video-container">
  <video id="video" poster="https://image.tmdb.org/t/p/original/rAiYTfKGqDCRIIqo664sY9XZIvQ.jpg">
    <source src="https://www.learningcontainer.com/wp-content/uploads/2020/05/sample-mp4-file.mp4" type="video/mp4">
    <!-- Sous-titres peuvent être ajoutés ici -->
  </video>

  <div id="centerPlay" class="material-icons">play_arrow</div>

  <div id="progressWrapper"><div id="progress-bar"></div></div>

  <div id="controls">
    <div>
      <span id="play" class="material-icons">play_arrow</span>
      <span id="backward" class="material-icons">replay_10</span>
      <span id="forward" class="material-icons">forward_10</span>
      <span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
    </div>
    <div>
      <span id="volume-icon" class="material-icons">volume_up</span>
      <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
      <span id="fullscreen" class="material-icons">fullscreen</span>
      <span id="settings" class="material-icons">settings</span>
      <span id="source" class="material-icons">videocam</span>
      <span id="subtitles" class="material-icons">subtitles</span>
    </div>

    <div id="settingsMenu" class="menu">
      <button data-speed="0.5">0.5x</button>
      <button data-speed="1">1x</button>
      <button data-speed="1.5">1.5x</button>
      <button data-speed="2">2x</button>
    </div>

    <div id="sourceMenu" class="menu">
      <button data-src="https://www.learningcontainer.com/wp-content/uploads/2020/05/sample-mp4-file.mp4">Sample MP4</button>
    </div>

    <div id="subtitleMenu" class="menu">
      <button data-sub="">Aucun</button>
    </div>

  </div>
</div>

<div id="fiche">
  <h1>Interstellar (2014)</h1>
  <div class="genres">Science-fiction, Aventure, Drame</div>
  <p>Un groupe d'explorateurs utilise un trou de ver récemment découvert pour dépasser les limites du voyage spatial humain et sauver l'humanité de la catastrophe sur Terre.</p>
</div>

<!-- Script du lecteur -->
<script>
const video = document.getElementById('video');
const controls = document.getElementById('controls');
const progressWrapper = document.getElementById('progressWrapper');
const progressBar = document.getElementById('progress-bar');
const currentTimeEl = document.getElementById('currentTime');
const totalTimeEl = document.getElementById('totalTime');
const playBtn = document.getElementById('play');
const centerPlay = document.getElementById('centerPlay');
const container = document.getElementById('video-container');
const volumeSlider = document.getElementById('volume-slider');
const volumeIcon = document.getElementById('volume-icon');
const settingsBtn = document.getElementById('settings');
const settingsMenu = document.getElementById('settingsMenu');
const sourceBtn = document.getElementById('source');
const sourceMenu = document.getElementById('sourceMenu');
const subtitleBtn = document.getElementById('subtitles');
const subtitleMenu = document.getElementById('subtitleMenu');

let hideTimeout;
video.controls = false;

function showControls(){
  controls.classList.remove('hide');
  progressWrapper.classList.remove('hide');
  document.body.style.cursor='default';
  clearTimeout(hideTimeout);
  hideTimeout = setTimeout(hideControls,3000);
}
function hideControls(){
  controls.classList.add('hide');
  progressWrapper.classList.add('hide');
  document.body.style.cursor='none';
  [settingsMenu, sourceMenu, subtitleMenu].forEach(menu => menu.style.display='none');
}
function formatTime(sec){
  const m=Math.floor(sec/60);
  const s=Math.floor(sec%60);
  return `${m}:${s.toString().padStart(2,'0')}`;
}
video.addEventListener('timeupdate',()=>{
  const percent=(video.currentTime/video.duration)*100;
  progressBar.style.width=percent+'%';
  currentTimeEl.textContent=formatTime(video.currentTime);
  totalTimeEl.textContent=formatTime(video.duration);
});
function togglePlay(){ video.paused ? video.play() : video.pause(); }
playBtn.addEventListener('click', togglePlay);
centerPlay.addEventListener('click', startVideoFromPoster);
video.addEventListener('play',()=>{
  playBtn.textContent='pause';
  centerPlay.textContent='pause';
  centerPlay.classList.add('hide');
  showControls();
});
video.addEventListener('pause',()=>{
  playBtn.textContent='play_arrow';
  centerPlay.textContent='play_arrow';
  centerPlay.classList.remove('hide');
});
function startVideoFromPoster(){
  centerPlay.classList.add('hide');
  video.play().then(()=>{ showControls(); });
}
progressWrapper.addEventListener('click', e=>{
  const rect=progressWrapper.getBoundingClientRect();
  const pos=(e.clientX-rect.left)/rect.width;
  video.currentTime=pos*video.duration;
});
volumeSlider.addEventListener('input',()=>{
  video.volume=volumeSlider.value;
  updateVolumeIcon();
});
volumeIcon.addEventListener('click',()=>{
  if(video.volume>0){ video.volume=0; volumeSlider.value=0; }
  else { video.volume=1; volumeSlider.value=1; }
  updateVolumeIcon();
});
function updateVolumeIcon(){
  if(video.volume===0) volumeIcon.textContent='volume_off';
  else if(video.volume<0.5) volumeIcon.textContent='volume_down';
  else volumeIcon.textContent='volume_up';
}
settingsBtn.addEventListener('click',()=>toggleMenu(settingsMenu));
settingsMenu.querySelectorAll('button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    video.playbackRate=parseFloat(btn.dataset.speed);
    settingsMenu.style.display='none';
  });
});
sourceBtn.addEventListener('click',()=>toggleMenu(sourceMenu));
sourceMenu.querySelectorAll('button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    video.src=btn.dataset.src;
    video.play();
    sourceMenu.style.display='none';
  });
});
subtitleBtn.addEventListener('click',()=>toggleMenu(subtitleMenu));
subtitleMenu.addEventListener('click',e=>{
  if(e.target.tagName==='BUTTON'){
    const subUrl=e.target.dataset.sub;
    video.querySelectorAll('track').forEach(t=>t.remove());
    if(subUrl){
      const track=document.createElement('track');
      track.src=subUrl; track.kind='subtitles'; track.default=true;
      video.appendChild(track);
    }
    subtitleMenu.style.display='none';
  }
});
document.getElementById('fullscreen').addEventListener('click',()=>{
  if(!document.fullscreenElement) container.requestFullscreen();
  else document.exitFullscreen();
});
document.getElementById('backward').addEventListener('click',()=>{ video.currentTime-=10; });
document.getElementById('forward').addEventListener('click',()=>{ video.currentTime+=10; });
function toggleMenu(menu){
  [settingsMenu, sourceMenu, subtitleMenu].forEach(m=>{ if(m!==menu) m.style.display='none'; });
  menu.style.display = menu.style.display==='flex' ? 'none' : 'flex';
}
document.addEventListener('mousemove',showControls);
showControls();
</script>

</body>
</html>
