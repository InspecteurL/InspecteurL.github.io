<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Custom Video Player with Film Info</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #000;
  color: white;
}

/* ---------------- FICHE FILM ---------------- */
.film-card {
  position: relative;
  width: 100%;
  height: 100vh;
  background-size: cover;
  background-position: center;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  text-align: center;
}
.film-card::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.6);
}
.film-card-content {
  position: relative;
  z-index: 2;
}
.film-poster {
  width: 200px;
  border-radius: 10px;
  margin-bottom: 20px;
}
.film-title {
  font-size: 40px;
  font-weight: bold;
  margin-bottom: 10px;
}
.film-info {
  font-size: 18px;
  margin-bottom: 20px;
}
.play-button {
  font-size: 50px;
  padding: 20px 40px;
  background: linear-gradient(90deg,#ff4b2b,#ff416c);
  border: none;
  border-radius: 10px;
  cursor: pointer;
  color: white;
  transition: transform 0.2s;
}
.play-button:hover { transform: scale(1.1); }

/* ---------------- LECTEUR VIDEO ---------------- */
.video-container {
  display: none; /* caché au départ */
  position: relative;
  width: 100%;
  max-width: 1200px;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: black;
}
video {
  max-width: 100%;
  max-height: 100%;
  display: block;
  object-fit: contain;
}

/* Controls and progress (copié depuis ton code précédent) */
.progress-wrapper { position: absolute; bottom: 70px; left: 20px; right: 20px; display: flex; align-items: center; gap: 10px; color: white; font-size: 14px; font-family: monospace; }
.progress { flex:1; height:12px; background: rgba(255,255,255,0.2); border-radius:6px; overflow:hidden; cursor:pointer; }
.progress-bar { width:0%; height:100%; background: linear-gradient(90deg,#ff4b2b,#ff416c); border-radius:6px; }
.controls { position:absolute; bottom:10px; left:0; right:0; display:flex; justify-content:space-between; align-items:center; padding:10px 20px; background: rgba(0,0,0,0.5); border-radius:10px; }
.controls-left, .controls-right { display:flex; align-items:center; gap:20px; }
.center-play { position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); font-size:80px; color:white; background: rgba(0,0,0,0.5); border-radius:50%; padding:20px; cursor:pointer; }
.material-symbols-outlined { cursor:pointer; color:white; font-size:35px; }

/* Volume slider */
.volume-container { display:flex; align-items:center; gap:10px; }
#volume-slider { width:100px; height:5px; appearance:none; background: rgba(255,255,255,0.3); border-radius:5px; outline:none; cursor:pointer; }
#volume-slider::-webkit-slider-thumb { appearance:none; width:12px; height:12px; background:#ff416c; border-radius:50%; cursor:pointer; }
#volume-slider::-moz-range-thumb { width:12px; height:12px; background:#ff416c; border-radius:50%; cursor:pointer; }
.menu { position:absolute; bottom:60px; right:20px; background: rgba(0,0,0,0.8); padding:10px; border-radius:8px; display:none; flex-direction:column; gap:5px; }
.menu button { background:transparent; border:none; color:white; padding:5px 10px; cursor:pointer; text-align:left; }
.menu button:hover { background: rgba(255,255,255,0.2); }
</style>
</head>
<body>

<!-- ---------------- FICHE FILM ---------------- -->
<div class="film-card" id="filmCard" style="background-image:url('https://cinepizza.xyz/posters/interstellar-bg.jpg')">
  <div class="film-card-content">
    <img class="film-poster" src="https://cinepizza.xyz/posters/interstellar.jpg" alt="Poster Interstellar">
    <div class="film-title">Interstellar</div>
    <div class="film-info">Année: 2014 | Genre: Sci-Fi | Durée: 2h49min</div>
    <button id="playFilmBtn" class="play-button">▶ Lire le film</button>
  </div>
</div>

<!-- ---------------- LECTEUR VIDEO ---------------- -->
<div class="video-container" id="videoContainer">
  <video id="video" src="https://cinepizza.xyz/movies/Interstellar.mp4" poster="https://cinepizza.xyz/posters/interstellar.jpg"></video>

  <span id="centerPlay" class="material-symbols-outlined center-play">play_arrow</span>

  <div class="progress-wrapper" id="progressWrapper">
    <span id="currentTime">0:00</span>
    <div class="progress" id="progress">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    <span id="totalTime">0:00</span>
  </div>

  <div class="controls" id="controls">
    <div class="controls-left">
      <span id="backward" class="material-symbols-outlined">replay_10</span>
      <span id="play" class="material-symbols-outlined">play_arrow</span>
      <span id="forward" class="material-symbols-outlined">forward_10</span>
      <div class="volume-container">
        <span id="volume-icon" class="material-symbols-outlined">volume_up</span>
        <input type="range" id="volume-slider" min="0" max="1" step="0.05" value="1">
      </div>
    </div>
    <div class="controls-right">
      <span id="subtitles" class="material-symbols-outlined">subtitles</span>
      <span id="source" class="material-symbols-outlined">cloud</span>
      <span id="settings" class="material-symbols-outlined">settings</span>
      <span id="fullscreen" class="material-symbols-outlined">fullscreen</span>
    </div>
  </div>

  <div id="settingsMenu" class="menu">
    <button data-speed="0.5">0.5x</button>
    <button data-speed="1">1x</button>
    <button data-speed="1.5">1.5x</button>
    <button data-speed="2">2x</button>
  </div>

  <div id="sourceMenu" class="menu">
    <button data-src="https://cinepizza.xyz/movies/Interstellar.mp4">Interstellar</button>
  </div>

  <div id="subtitleMenu" class="menu"></div>
</div>

<script>
// ---------------- AFFICHER LECTEUR ----------------
const playFilmBtn = document.getElementById('playFilmBtn');
const filmCard = document.getElementById('filmCard');
const videoContainer = document.getElementById('videoContainer');

playFilmBtn.addEventListener('click', () => {
  filmCard.style.display = 'none';
  videoContainer.style.display = 'flex';
  video.play();
});

// ---------------- LECTEUR VIDEO (copié depuis ton code) ----------------
const video = document.getElementById('video');
const controls = document.getElementById('controls');
const progressWrapper = document.getElementById('progressWrapper');
const progress = document.getElementById('progress');
const progressBar = document.getElementById('progress-bar');
const currentTimeEl = document.getElementById('currentTime');
const totalTimeEl = document.getElementById('totalTime');
const playBtn = document.getElementById('play');
const centerPlay = document.getElementById('centerPlay');
const container = document.getElementById('video-container');
const volumeSlider = document.getElementById('volume-slider');
const volumeIcon = document.getElementById('volume-icon');
const settingsBtn = document.getElementById('settings');
const settingsMenu = document.getElementById('settingsMenu');
const sourceBtn = document.getElementById('source');
const sourceMenu = document.getElementById('sourceMenu');
const subtitleBtn = document.getElementById('subtitles');
const subtitleMenu = document.getElementById('subtitleMenu');

let hideTimeout;
video.controls = false;

// ---------------------
// Show / hide controls
// ---------------------
function showControls() {
  controls.classList.remove('hide');
  progressWrapper.classList.remove('hide');
  centerPlay.classList.remove('hide');
  document.body.style.cursor = 'default';
  clearTimeout(hideTimeout);
  hideTimeout = setTimeout(hideControls, 3000);
}

function hideControls() {
  controls.classList.add('hide');
  progressWrapper.classList.add('hide');
  centerPlay.classList.add('hide');
  document.body.style.cursor = 'none';
  [settingsMenu, sourceMenu, subtitleMenu].forEach(menu => menu.style.display = 'none');
}

document.addEventListener('mousemove', showControls);
showControls();

// ---------------------
// Format time
// ---------------------
function formatTime(sec) {
  const m = Math.floor(sec / 60);
  const s = Math.floor(sec % 60);
  return `${m}:${s.toString().padStart(2, '0')}`;
}

// ---------------------
// Update progress & time
// ---------------------
video.addEventListener('timeupdate', () => {
  const percent = (video.currentTime / video.duration) * 100;
  progressBar.style.width = percent + '%';
  currentTimeEl.textContent = formatTime(video.currentTime);
  totalTimeEl.textContent = formatTime(video.duration);
});

// ---------------------
// Play / pause
// ---------------------
function togglePlay() {
  if (video.paused) video.play();
  else video.pause();
}

// Clicks
playBtn.addEventListener('click', togglePlay);
centerPlay.addEventListener('click', togglePlay);

// Update icons
video.addEventListener('play', () => {
  playBtn.textContent = 'pause';
  centerPlay.textContent = 'pause'; // <-- Change ici
  centerPlay.classList.add('hide'); // facultatif : cacher le bouton central en lecture
});

video.addEventListener('pause', () => {
  playBtn.textContent = 'play_arrow';
  centerPlay.textContent = 'play_arrow'; // <-- Change ici
  centerPlay.classList.remove('hide'); // montrer le bouton central si vidéo en pause
});

// ---------------------
// Seek
// ---------------------
progressWrapper.addEventListener('click', e => {
  const rect = progress.getBoundingClientRect();
  const pos = (e.clientX - rect.left) / rect.width;
  video.currentTime = pos * video.duration;
});

// ---------------------
// Volume
// ---------------------
volumeSlider.addEventListener('input', () => {
  video.volume = volumeSlider.value;
  updateVolumeIcon();
});
volumeIcon.addEventListener('click', () => {
  if(video.volume > 0){ video.volume = 0; volumeSlider.value = 0; }
  else { video.volume = 1; volumeSlider.value = 1; }
  updateVolumeIcon();
});

function updateVolumeIcon() {
  if(video.volume === 0) volumeIcon.textContent = 'volume_off';
  else if(video.volume < 0.5) volumeIcon.textContent = 'volume_down';
  else volumeIcon.textContent = 'volume_up';
}

// ---------------------
// Settings menu
// ---------------------
settingsBtn.addEventListener('click', () => toggleMenu(settingsMenu));
settingsMenu.querySelectorAll('button').forEach(btn => {
  btn.addEventListener('click', () => {
    video.playbackRate = parseFloat(btn.dataset.speed);
    settingsMenu.style.display = 'none';
  });
});

// ---------------------
// Source menu
// ---------------------
sourceBtn.addEventListener('click', () => toggleMenu(sourceMenu));
sourceMenu.querySelectorAll('button').forEach(btn => {
  btn.addEventListener('click', () => {
    video.src = btn.dataset.src;
    video.play();
    sourceMenu.style.display = 'none';
  });
});

// ---------------------
// Subtitles menu
// ---------------------
subtitleBtn.addEventListener('click', () => toggleMenu(subtitleMenu));
subtitleMenu.addEventListener('click', e => {
  if(e.target.tagName === 'BUTTON'){
    const subUrl = e.target.dataset.sub;
    video.querySelectorAll('track').forEach(t => t.remove());
    if(subUrl){
      const track = document.createElement('track');
      track.src = subUrl;
      track.kind = 'subtitles';
      track.default = true;
      video.appendChild(track);
    }
    subtitleMenu.style.display = 'none';
  }
});

// ---------------------
// Fullscreen
// ---------------------
document.getElementById('fullscreen').addEventListener('click', () => {
  if(!document.fullscreenElement) container.requestFullscreen();
  else document.exitFullscreen();
});

// ---------------------
// Backward / Forward
// ---------------------
document.getElementById('backward').addEventListener('click', () => { video.currentTime -= 10; });
document.getElementById('forward').addEventListener('click', () => { video.currentTime += 10; });

// ---------------------
// Toggle menu helper
// ---------------------
function toggleMenu(menu){
  [settingsMenu, sourceMenu, subtitleMenu].forEach(m => { if(m !== menu) m.style.display = 'none'; });
  menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
}
</script>

</body>
</html>
